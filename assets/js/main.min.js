gsap.registerPlugin(ScrollTrigger),document.addEventListener("DOMContentLoaded",()=>{let o=768,t=435;gsap.matchMedia().add({isNotebook:`(min-width:${o+1}px)`,isTablet:`(min-width:${t+1}px) and (max-width:${o}px)`,isMobile:`(max-width:${t}px)`,reduceMotion:"(prefers-reduced-motion)"},o=>{let{isNotbook:t,isTablet:e,isMobile:r,reduceMotion:s}=o.conditions;allTrueReducer=((o,t)=>o&&t),console.log(o),r||gsap.to(".block1__button",{scrollTrigger:{trigger:".block1",start:"top top",scrub:!0,toggleActions:"play pause reverse none"},y:-400}),gsap.fromTo("#block1Man",{y:100},{scrollTrigger:{trigger:".block1",start:"top top",scrub:!0,toggleActions:"play pause reverse none"},y:0}),gsap.to("#block1Bg",{scrollTrigger:{trigger:".block1",start:"top top",end:"bottom top",scrub:!0,toggleActions:"play pause reverse none"},y:200,delay:3}),gsap.to("#block2345Bg",{scrollTrigger:{trigger:".block2345",start:"top top",end:"bottom bottom",scrub:!0,toggleActions:"play pause reverse none"},y:-500,delay:3}),gsap.fromTo(".block2__card1",{x:"-150vw"},{scrollTrigger:{trigger:".block1",start:"top top",end:"55% top",scrub:!0,toggleActions:"play pause pause none"},x:0,delay:2}),gsap.fromTo(".block2__card2",{x:"-100vw"},{scrollTrigger:{trigger:".block1",start:"top top",end:"center top",scrub:!0,toggleActions:"play pause pause none"},x:0,delay:2}),gsap.fromTo(".block2__card3",{x:"-100vw"},{scrollTrigger:{trigger:".block1",start:"top top",end:"45% top",scrub:!0,toggleActions:"play pause pause none"},x:0,delay:2}),gsap.fromTo(".block3__card1",{x:"-150vw",opacity:0},{scrollTrigger:{trigger:".block2",start:"top top",end:"55% top",scrub:!0,toggleActions:"play pause pause none"},opacity:1,x:0,delay:2}),gsap.fromTo(".block3__card2",{x:"150vw",opacity:0},{scrollTrigger:{trigger:".block2",start:"top top",end:"55% top",scrub:!0,toggleActions:"play pause pause none"},opacity:1,x:0,delay:2}),gsap.fromTo(".block3__card3",{x:"-150vw",opacity:0},{scrollTrigger:{trigger:".block2",start:"top top",end:"55% top",scrub:!0,toggleActions:"play pause pause none"},opacity:1,x:0,delay:2})})});
gsap.registerPlugin(ScrollTrigger);

document.addEventListener('DOMContentLoaded', () => {
    
    let mm = gsap.matchMedia()
    let bp = {
        notebook:   1440,
        tablet:     768,
        mobile:     435
    }

    mm.add(
        {
            isNotebook: `(min-width:${bp.tablet+1}px)`,
            isTablet: `(min-width:${bp.mobile+1}px) and (max-width:${bp.tablet}px)`,
            isMobile: `(max-width:${bp.mobile}px)`,
            reduceMotion: `(prefers-reduced-motion)`
        },
        (context) => {
            
            let {isNotbook,isTablet,isMobile,reduceMotion} = context.conditions

            allTrueReducer = (total,bool) => total && bool

            console.log(context)

            if (!isMobile)
                gsap.to('.block1__button', {
                scrollTrigger: {
                    trigger: '.block1',
                    start: 'top top',
                    // end: 'bottom top',
                    scrub: true,
                    toggleActions: 'play pause reverse none'
                },
                    y: -400,
                })

            gsap.fromTo('#block1Man',
                {
                    y: 100
                },
                {
                    scrollTrigger: {
                        trigger: '.block1',
                        start: 'top top',
                        // end: 'bottom top',
                        scrub: true,
                        toggleActions: 'play pause reverse none'
                    },
                    y: 0,
                }
            )
        
            gsap.to('#block1Bg', {
                scrollTrigger: {
                    trigger: '.block1',
                    start: 'top top',
                    end: 'bottom top',
                    scrub: true,
                    toggleActions: 'play pause reverse none'
                },
                y: 200,
                delay: 3,
            })

            gsap.to('#block2345Bg', {
                scrollTrigger: {
                    trigger: '.block2345',
                    start: 'top top',
                    end: 'bottom bottom',
                    scrub: true,
                    toggleActions: 'play pause reverse none'
                },
                y: -500,
                delay: 3,
            })
        
            gsap.fromTo('.block2__card1', 
                {
                    x: '-150vw',
                },
                {
                    scrollTrigger: {
                        trigger: '.block1',
                        start: 'top top',
                        end: '55% top',
                        scrub: true,
                        toggleActions: 'play pause pause none'
                    },
                    x: 0,
                    delay: 2,
                }
            )

            gsap.fromTo('.block2__card2', 
                {
                    x: '-100vw',
                },
                {
                    scrollTrigger: {
                        trigger: '.block1',
                        start: 'top top',
                        end: 'center top',
                        scrub: true,
                        toggleActions: 'play pause pause none'
                    },
                    x: 0,
                    delay: 2,
                }
            )
            
            gsap.fromTo('.block2__card3', 
                {
                    x: '-100vw',
                },
                {
                    scrollTrigger: {
                        trigger: '.block1',
                        start: 'top top',
                        end: '45% top',
                        scrub: true,
                        toggleActions: 'play pause pause none'
                    },
                    x: 0,
                    delay: 2,
                }
            )
        
            gsap.fromTo('.block3__card1', 
                {
                    x: '-150vw',
                    opacity: 0,
                },
                {
                    scrollTrigger: {
                        trigger: '.block2',
                        start: 'top top',
                        end: '55% top',
                        scrub: true,
                        toggleActions: 'play pause pause none'
                    },
                    opacity: 1,
                    x: 0,
                    delay: 2,
                }
            )

            gsap.fromTo('.block3__card2', 
                {
                    x: '150vw',
                    opacity: 0,
                },
                {
                    scrollTrigger: {
                        trigger: '.block2',
                        start: 'top top',
                        end: '55% top',
                        scrub: true,
                        toggleActions: 'play pause pause none'
                    },
                    opacity: 1,
                    x: 0,
                    delay: 2,
                }
            )

            gsap.fromTo('.block3__card3', 
                {
                    x: '-150vw',
                    opacity: 0,
                },
                {
                    scrollTrigger: {
                        trigger: '.block2',
                        start: 'top top',
                        end: '55% top',
                        scrub: true,
                        toggleActions: 'play pause pause none'
                    },
                    opacity: 1,
                    x: 0,
                    delay: 2,
                }
            )
        }
    )
})

